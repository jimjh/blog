<!DOCTYPE html>
<html lang="en">

<head>
  <!-- ## for client-side less
  <link rel="stylesheet/less" type="text/css" href="https://blog.jimjh.com/theme/css/style.less">
  <script src="http://cdnjs.cloudflare.com/ajax/libs/less.js/1.7.3/less.min.js" type="text/javascript"></script>
  -->
  <link rel="stylesheet" type="text/css" href="https://blog.jimjh.com/theme/css/style.css">
  <link rel="stylesheet" type="text/css" href="https://blog.jimjh.com/theme/css/pygments.css">
  <link rel="stylesheet" type="text/css" href="//fonts.googleapis.com/css?family=PT+Sans|PT+Serif|PT+Mono">

  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <meta name="author" content="James Lim">
  <meta name="description" content="Posts and writings by James Lim">

  <link href="http://feeds.feedburner.com/jimjh/blog" type="application/rss+xml" rel="alternate" title="Ampersand RSS" />

<meta name="keywords" content="hadoop, oss">

  <title>
    Ampersand
&ndash; dragon - an OSS File System for Hadoop  </title>

<script type="text/javascript">
  var _gaq = _gaq || [];
  _gaq.push(['_setAccount', 'UA-5604647-6']);
  _gaq.push(['_trackPageview']);

  (function() {
    var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
    ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
    var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
  })();
</script>
</head>

<body>
  <aside>
    <div id="user_meta">
      <a href="https://blog.jimjh.com">
        <img src="https://blog.jimjh.com/images/jimjh.png" alt="logo">
      </a>
      <h2><a href="https://blog.jimjh.com">James Lim</a></h2>
      <p></p>
      <ul>
        <li><a href="https://jimjh.com" target="_blank">Profile</a></li>
      </ul>
    </div>
  </aside>

  <main>
    <header>
      <p>
      <a href="https://blog.jimjh.com">Index</a> &brvbar; <a href="https://blog.jimjh.com/archives.html">Archives</a>
      &brvbar; <a href="http://feeds.feedburner.com/jimjh/blog">RSS</a>
      </p>
    </header>

<article>
  <div class="article_title">
    <h1><a href="https://blog.jimjh.com/dragon-an-oss-file-system-for-hadoop.html">dragon - an OSS File System for Hadoop</a></h1>
  </div>
  <div class="article_text">
    <p><a href="http://www.aliyun.com/product/oss/">OSS</a> is Aliyun’s offering of a distributed, highly available storage service.
<a href="https://github.com/quixey/dragon-oss">dragon</a> allows YARN applications (incl. MapReduce jobs) to read and write data
to OSS through the HDFS API. This allows you to swap filesystems without
modifying your YARN application, MapReduce job, Pig script, Hive script etc.</p>
<p>The source code is available <a href="https://github.com/quixey/dragon-oss">on GitHub</a>.
The dragon jar may be built using</p>
<div class="highlight"><pre><span></span>$ ./gradlew jar
</pre></div>


<p>dragon’s dependencies may be downloaded using</p>
<div class="highlight"><pre><span></span>$ ./gradlew copyDeps
</pre></div>


<p>To use dragon in your Hadoop cluster, add <code>dragon-*.jar</code> and its dependencies
to Hadoop’s classpath on your clusters. Then modify <code>core-site.xml</code> to add the
following properties:</p>
<div class="highlight"><pre><span></span><span class="ni">&amp;lt;</span>property<span class="ni">&amp;gt;</span>
    <span class="ni">&amp;lt;</span>name<span class="ni">&amp;gt;</span>fs.oss.impl<span class="ni">&amp;lt;</span>/name<span class="ni">&amp;gt;</span>
    <span class="ni">&amp;lt;</span>value<span class="ni">&amp;gt;</span>com.quixey.hadoop.fs.oss.OSSFileSystem<span class="ni">&amp;lt;</span>/value<span class="ni">&amp;gt;</span>
<span class="ni">&amp;lt;</span>/property<span class="ni">&amp;gt;</span>
<span class="ni">&amp;lt;</span>property<span class="ni">&amp;gt;</span>
    <span class="ni">&amp;lt;</span>name<span class="ni">&amp;gt;</span>fs.oss.accessKeyId<span class="ni">&amp;lt;</span>/name<span class="ni">&amp;gt;</span>
    <span class="ni">&amp;lt;</span>value<span class="ni">&amp;gt;</span>...<span class="ni">&amp;lt;</span>/value<span class="ni">&amp;gt;</span>
<span class="ni">&amp;lt;</span>/property<span class="ni">&amp;gt;</span>
<span class="ni">&amp;lt;</span>property<span class="ni">&amp;gt;</span>
    <span class="ni">&amp;lt;</span>name<span class="ni">&amp;gt;</span>fs.oss.secretAccessKey<span class="ni">&amp;lt;</span>/name<span class="ni">&amp;gt;</span>
    <span class="ni">&amp;lt;</span>value<span class="ni">&amp;gt;</span>...<span class="ni">&amp;lt;</span>/value<span class="ni">&amp;gt;</span>
<span class="ni">&amp;lt;</span>/property<span class="ni">&amp;gt;</span>
</pre></div>


<p>This tells the Hadoop clients to use the dragon implementation of HDFS for all
URIs with the <code>oss://</code> scheme.</p>
<p>You may verify that your setup works by running the following command:</p>
<div class="highlight"><pre><span></span>$ hdfs dfs -ls oss://your-bucket/
</pre></div>


<p>(<a href="https://github.com/quixey/dragon-oss">dragon</a> is an open-source project by <a href="http://www.quixey.com/">Quixey</a>.)</p>
  </div>
  <div class="article_meta">
    <p>Posted on: Wed 29 October 2014</p>
    <p>Category: <a href="https://blog.jimjh.com/category/software.html">Software</a>
 &ndash; Tags:
      <a href="https://blog.jimjh.com/tag/hadoop.html">hadoop</a>,      <a href="https://blog.jimjh.com/tag/oss.html">oss</a>    </p>
  </div>

  <div id="article_comments">
    <div id="disqus_thread"></div>
    <script type="text/javascript">
        var disqus_identifier = "dragon-an-oss-file-system-for-hadoop.html";
        (function() {
             var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
             dsq.src = '//jimjh.disqus.com/embed.js';
             (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
         })();
    </script>
  </div>

</article>


    <div id="ending_message">
      <p>&copy; James Lim. Built using <a href="http://getpelican.com" target="_blank">Pelican</a>. Theme by Giulio Fidente on <a href="https://github.com/gfidente/pelican-svbhack" target="_blank">github</a>. </p>
    </div>
  </main>
</body>
</html>